<Macro m6w6_host_defs>
	ServerName m6w6.name
	ServerAlias www.m6w6.name
	ServerAdmin webmaster@m6w6.name

	DocumentRoot /var/www/m6w6/public

	<Directory /var/www/m6w6/public>
		AllowOverride None
		Require all granted
	</Directory>
</Macro>

<VirtualHost _default_:80>
	Use m6w6_host_defs
	<Location "/server-status">
		Define NO_SSL_REDIRECT
	</Location>
	<IfDefine !NO_SSL_REDIRECT>
		RedirectPermanent / https://m6w6.name/
	</IfDefine>
</VirtualHost>
<VirtualHost *:80>
	Use m6w6_host_defs
	RedirectPermanent / https://m6w6.name/
</VirtualHost>

<IfModule mod_ssl.c>
	<VirtualHost _default_:443>
		Use m6w6_host_defs
		Include "bits/hsts-nosub"
		SSLEngine on
		SSLUseStapling on
		SSLCertificateFile /etc/letsencrypt/live/m6w6.name/fullchain.pem
		SSLCertificateKeyFile /etc/letsencrypt/live/m6w6.name/privkey.pem
	</VirtualHost>
	<VirtualHost *:443>
		Use m6w6_host_defs
		Include "bits/hsts-nosub"
		SSLEngine on
		SSLUseStapling on
		SSLCertificateFile /etc/letsencrypt/live/m6w6.name/fullchain.pem
		SSLCertificateKeyFile /etc/letsencrypt/live/m6w6.name/privkey.pem
	</VirtualHost>
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
